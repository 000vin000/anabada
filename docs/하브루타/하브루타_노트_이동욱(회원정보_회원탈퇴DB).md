
# 하브루타노트(이동욱)

---

| **훈련과정** | 자바&Springboot 크로스 플랫폼(풀스택)융합 응용SW개발자 양성과정 |
| --- | --- |
| **훈련기간** | 2024.10.28~2025.04.18 |
| **훈련교사** | 박민 |
| **프로젝트 유형** | 팀(협동) |
| **팀원** | 김정빈(팀장), 강수연, 정민지, 정현의, 이동욱, 한혜진 |
| **프로젝트 기간** | 2025.02.07 ~ 2025.02.20 |
| **프로젝트명** | 개인간의 의류 경매 플랫폼 |

---

| 맡은 임무 | 회원탈퇴 기능 구현    |
| ----- | ------------- |
| 작성일   | 2025.02.11-12 |
| 훈련생명  | 이동욱           |

---


회원정보 수정은 회원가입과 구조가 비슷해서 간단했음

11일 탈퇴기능 공부
- 회원탈퇴
	각테이블마다 컬럼을 만듦 가입중 / 탈퇴대기
	계속 조회되는 문제가 발생하니
	따로 뷰를 만들어서 탈퇴 대기 명단을 조회할 수 있게끔 만들어서 관리 할 수 있음
	
	삭제에 관한 문제는
	DB에서 주기적으로 할 수 도 있고 프로그램 내에서도 할 수 있음.
https://www.perplexity.ai/search/hoeweontaltoe-peijireul-guhyeo-zWpQ4muJTrqVAXTHmYog_g

	user테이블에
	userStatus컬럼 추가
	
	ACTIVE/WITHDRAWN
	
	userNo를 참조하는 테이블 qna favor buy sell bid에
	qnaState favorState buyState sellState bidState  컬럼 각각 추가

12일 DB 관리하는 팀원과 회의 시작
- 회원탈퇴
 회의 결과
 각 테이블별로 state 컬럼을 만드는건 너무 비효율적임!
user테이블에만 userStatus 추가하고 삭제된 날짜  컬럼 userDeactiveDate만들기로함
	 >이유는 즐겨찾기 기능에서도 active와 deactive를 계속 확인 해줘야함
그래서 view를 만들기로함
	요기서 active만 뷰로 만들고 use로 이름을 지음 > 팀원들 mapper수정 안해도 됌
	기존 user테이블은 alluser로 변경
그리고 삭제는 외래키 옵션으로 cascade를 사용해서 삭제되면 연결 테이블 데이터 전부 삭제할 수 있게 만듬

잘만들어짐

회원탈퇴 기능 구현은 여전히 alluser을 사용해야함 ... view는 그져 땡겨오는 거란걸 잊지말자!




### 1. 작업이해도

- 바로 데이터가 삭제되는 것 보다 백업 기간이 있었으면 함.
- 회원탈퇴 기능의 복잡성과 데이터 관리의 중요성 인식
- 데이터베이스 뷰(view)의 개념과 활용 방법 이해
- 외래키 옵션(CASCADE)의 기능과 영향 파악
- 데이터베이스 설계 변경이 전체 시스템에 미치는 영향 이해
- 
### 2. 작업계획


- user 테이블 구조 변경:
    - userStatus 컬럼 추가 (ACTIVE/WITHDRAWN)
    - userDeactiveDate 컬럼 추가
- 활성 사용자만 포함하는 'use' 뷰 생성
- 기존 user 테이블을 'alluser'로 이름 변경 (기존 매퍼에 영향 예상)
- 외래키에 CASCADE 옵션 적용
- 회원탈퇴 기능 구현 (alluser 테이블 사용)
- 팀원들에게 변경사항 공유 및 교육

### 3. 관찰기록

- 초기 계획 (각 테이블에 상태 컬럼 추가)의 비효율성 발견
- 팀 회의를 통한 더 효율적인 해결책 도출
- 뷰와 실제 테이블의 역할 차이 인식 (조회 vs 수정)
- 뷰 사용으로 인한 쿼리 단순화 및 데이터 일관성 향상 관찰
- CASCADE 옵션 적용 후 데이터 삭제의 편의성 + 백업 기간 확보

### 4. 본인의견

- 초기 설계 단계에서의 충분한 고민과 팀 논의의 중요성 재확인
- 데이터베이스 설계 변경 시 전체 시스템에 미치는 영향을 고려해야 함
- 뷰 사용은 데이터 접근을 단순화하지만, 실제 데이터 조작 시 주의가 필요함
- 외래키 옵션(CASCADE)은 편리하지만, 데이터 무결성에 주의해야 함
- 팀원 전체와 상의하지 않고 소규모로 회의 후 DB 변경하여 팀원 모두 코드 고장나는 문제가 발생했었음..
